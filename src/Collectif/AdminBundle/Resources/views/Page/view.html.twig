{% extends 'CollectifAdminBundle::layout.html.twig' %}

{% block title %}Collectif CONFLUENCE{% endblock %}

{% block content %}

<h1>Liste des pages</h1>

<div class="header-buttons">
	<input type="button" class="btn btn-success right" onclick="window.open('{{ path('collectif_page_create', { 'parent': parent }) }}', '_parent');" value="Ajouter une page">
	
	<input type="button" class="btn btn-warning" onclick="window.open('{{ path('collectif_page_homepage', { 'parent': backlink }) }}', '_parent');" value="Retour">

</div>

<table class="table table-hover">
	<tr>
		<th>Editer</th>
		<th>Titre</th>
		<th>Enfants</th>
		<th>Actif</th>
		<th>Supprimer</th>
	</tr>
{% for p in pages %}
	<tr>
<td><a class="btn" href="{{ path('collectif_page_edit', { 'id': p.id, 'parent': parent }) }}"><i class="icon-edit"></i></a></td>
<td>{{ p.titre }}</td>
<td><a class="btn" href="{{ path('collectif_page_homepage', { 'parent': p.id }) }}"><i class="icon-zoom-in"></i></a></td>
<td>{% if p.actif %}
		<i class="icon-ok"></i>
	{% else %}
		<i class="icon-remove"></i>
	{% endif %}	
</td>
<td><a onclick="if(!confirm('Voulez-vous vraiment supprimer cette page ?')) { return false };" class="btn" href="{{ path('collectif_page_delete', { 'id': p.id, 'parent': parent }) }}"><i class="icon-trash"></i></a></td>
</tr>
{% else %}
	<tr><td>Aucune page n’a été trouvée.</td></tr>
{% endfor %}
</table>

{% endblock %}